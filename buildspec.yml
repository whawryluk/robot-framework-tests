version: 0.2

phases:
  install:
    commands:
      - echo Installing dependencies...
      - pip install --upgrade pip
      - pip install robotframework robotframework-seleniumlibrary selenium
      - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      - apt-get update
      - apt-get install -y ./google-chrome-stable_current_amd64.deb
      - apt-get install -f -y
      - apt-get install -y xvfb
      - apt-get install -y libxss1 libappindicator1 libindicator7
      - apt-get install -y libnss3 libgconf-2-4
      - google-chrome --version
      # Install matching chromedriver-binary version
      - pip install chromedriver-binary==117.0.5938.132.0
  pre_build:
    commands:
      - echo Pre-build stage...
  build:
    commands:
      - echo Starting tests...
      - robot --outputdir results tests/
artifacts:
  files:
    - appspec.yml
    - 'results/**/*'
